<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="../../templates/default.xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"> 
	
	<ui:define name="content">
		<h:form prependId="false">
			<p:messages id="messages" showDetail="false" autoUpdate="true" closable="true" />
			<p:growl id="grlMessages" />
			  		
			<p:tabView id="tvListTeamSeller" style="height: 500px;"> 
				<p:tab id="tabListTeamSeller" title="#{msg.resolve('tab.team.seller.list')}">
					<p:spacer width="20" height="15"/>
				
					<h:panelGroup id="pgroupTeamSellerSearch">
						<h:panelGrid columns="2" cellpadding="5" cellspacing="5">
								<h:outputLabel value="#{msg.resolve('label.supervisor.registry')}" for="txtSupervisorRegistry"/>
								<p:inputText id="txtSupervisorRegistry" size="10" maxlength="10"
										value="#{listTeamSellerBean.tsSearch.supervisorRegistry}"/>
								
								<h:outputLabel value="#{msg.resolve('label.supervisor.name')}" for="txtSupervisorName"/>
								<p:inputText id="txtSupervisorName" size="40" maxlength="80"
										value="#{listTeamSellerBean.tsSearch.supervisorName}"/>
										 
								<h:outputLabel value="#{msg.resolve('label.seller.registry')}" for="txtSellerRegistry"/>
								<p:inputText id="txtSellerRegistry" size="10" maxlength="10"
										value="#{listTeamSellerBean.tsSearch.sellerRegsitry}"/>
								 
								<h:outputLabel value="#{msg.resolve('label.supervisor.name')}" for="txtSellerName"/>
								<p:inputText id="txtSellerName" size="40" maxlength="80"
										value="#{listTeamSellerBean.tsSearch.sellerName}"/>
						</h:panelGrid> 
						<h:panelGrid columns="4" cellpadding="0" cellspacing="2">
								<h:outputLabel value="#{msg.resolve('label.branch')}" for="cbxBranch">
									<p:spacer width="94px" height="2px"/>
								</h:outputLabel>
								
								<p:selectOneMenu id="cbxBranch" required="true" 
									requiredMessage="#{msg.resolveMsg('required.field', 'label.branch')}"
									value="#{listTeamSellerBean.tsSearch.branchId}" style="width: 250px;">
									<f:selectItem itemLabel="#{msg.resolve('select.one.option')}"/>  
									<f:selectItems value="#{listTeamSellerBean.branches}" 
										    var="branch" itemValue="#{branch.id}"
											itemLabel="#{branch.code} - #{branch.name}"/> 
								</p:selectOneMenu>
												
								<p:spacer width="5" height="2"/>
																
								<p:commandLink title="#{msg.resolve('label.search')}" 
										process="@this, tvListTeamSeller:pgroupTeamSellerSearch" 
										actionListener="#{listTeamSellerBean.search}" 	
										update="messages, tvListTeamSeller:dgResults, 
										tvListTeamSeller:pgConcludeProcess">
									<h:graphicImage name="busca.png" library="images"/>
								</p:commandLink>
								
						</h:panelGrid>
					</h:panelGroup>
					
					<p:spacer width="20" height="20"/>
						
					<p:dataTable widgetVar="dgResult" id="dgResults" style="width: 96%;" var="teamSeller" value="#{listTeamSellerBean.teamSellers}"
							emptyMessage="#{msg.resolve('data.table.empty')}"  rows="5" paginator="true" paginatorAlwaysVisible="false"
							paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" paginatorPosition="bottom">
					
						<f:facet name="header">  
				            <h:outputLabel value="#{msg.resolve('data.table.team.seller.header')}" />
				        </f:facet>  
				        
				        <p:column headerText="#{msg.resolve('label.branch')}">  
				            <h:outputText value="#{teamSeller.branch.name}"/>  
				        </p:column>  
				  
				        <p:column headerText="#{msg.resolve('label.seller')}">  
				            <h:outputText value="#{teamSeller.seller.name}" />  
				        </p:column>  
				  
				        <p:column headerText="#{msg.resolve('label.seller.situation')}" style="text-align: center !important;">  
				            <h:outputText value="#{teamSeller.seller.situation.name}" />    
				        </p:column>  
				        
				        <p:column headerText="#{msg.resolve('label.supervisor')}">  
				            <h:outputText value="#{teamSeller.supervisor.name}" />    
				        </p:column>  
				        
				        <p:column headerText="#{msg.resolve('label.supervisor.situation')}" style="text-align: center !important;">  
				            <h:outputText value="#{teamSeller.supervisor.situation.name}" />    
				        </p:column>  
				        
				        <p:column headerText="#{msg.resolve('label.actions')}" 
				        			style="text-align: center !important;" rendered="#{listTeamSellerBean.concludedProcess}">
				        			  
				            <p:commandLink title="#{msg.resolve('label.edit')}" immediate="true" 
				            	ajax="false" process="@this" action="/pages/equipe-vendedor/cadastro">
								<h:graphicImage name="pencil.png" library="images"/>
								<f:setPropertyActionListener target="#{teamSellerBean.teamSeller}" value="#{teamSeller}"/>
							</p:commandLink>
				       
				       		<p:spacer width="5px;" height="2px"/>
				       
				            <p:commandLink title="#{msg.resolve('label.exclude')}"  immediate="true" oncomplete="dlgRemoveTeamSeller.show();">
								<h:graphicImage name="delete.png" library="images"/>
								<f:setPropertyActionListener target="#{listTeamSellerBean.teamSellerToDelete}" value="#{teamSeller}"/>
							</p:commandLink>
							
				        </p:column>  
					</p:dataTable>
					
					<p:spacer width="2" height="10px;"/>
					
					<h:panelGrid id="pgConcludeProcess" columns="1" style="width: 96%; text-align:right !important;" >			
						<p:commandButton title="#{msg.resolve('link.conclude')}" image="ui-icon-locked" 
									ajax="true" disabled="#{!listTeamSellerBean.concludedProcess}"
									oncomplete="dlgConcludeProcess.show();"	value="#{msg.resolve('label.conclude')}"/>
						<p:spacer width="20" height="10"/>
					</h:panelGrid>
					
					<p:confirmDialog  widgetVar="dlgRemoveTeamSeller" id="dlRemoveTeamSeller" header="#{msg.resolve('dialog.header.remove.team.seller')}"  
								 message="#{msg.resolve('dialog.message.remove.team.seller')}" severity="alert">
		                <h:panelGrid style="position: relative; left: 60%; " columns="2" cellspacing="2">
		                
		                    <p:commandButton value="#{msg.resolve('label.yes')}" onclick="dlgRemoveTeamSeller.hide()" image="ui-icon-close" 
		                    		actionListener="#{listTeamSellerBean.remove}" immediate="true"
		                    		update="grlMessages, tvListTeamSeller:dgResults, tvListTeamSeller:pgConcludeProcess" />
		                  
							<p:commandButton value="#{msg.resolve('label.no')}" oncomplete="dlgRemoveTeamSeller.hide();" 
		                    		actionListener="#{financialCloseBean.cancelRemove}" immediate="true" image="ui-icon-close" />
		                   
		                   	<p:spacer width="10px;" height="2px" image="ui-icon ui-icon-print"/>
		                
		                </h:panelGrid>
	           		</p:confirmDialog>
	           		
	           		<p:confirmDialog widgetVar="dlgConcludeProcess" id="dlConcludeProcess" header="#{msg.resolve('dialog.header.conclude.team.seller')}"  
								 message="#{msg.resolve('dialog.message.conclude.team.seller')}" severity="alert"
								 width="350">
		                <h:panelGrid style="position: relative; left: 60%; " columns="2" cellspacing="2">
		                
		                    <p:commandButton id="btnYes" value="#{msg.resolve('label.yes')}" 
		                    		oncomplete="dlgConcludeProcess.hide();" image="ui-icon-check" 
		                    		actionListener="#{listTeamSellerBean.concludeRegistry}"  immediate="false"
		                    		process="@this, tvListTeamSeller:pgroupTeamSellerSearch, tvListTeamSeller:cbxBranch" 
									update="tvListTeamSeller:pgConcludeProcess, tvListTeamSeller:dgResults, messages, grlMessages" />
		                  
							<p:commandButton id="btnNo" value="#{msg.resolve('label.no')}" image="ui-icon-close" 
									oncomplete="dlgConcludeProcess.hide();" immediate="true"/>
		                   
		                   	<p:spacer width="10px;" height="2px" />
		                
		                </h:panelGrid>
	           		</p:confirmDialog>

				</p:tab>
			</p:tabView>
		</h:form>	
	</ui:define>
</ui:composition>
