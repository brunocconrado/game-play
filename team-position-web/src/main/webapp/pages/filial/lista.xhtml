<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="../../templates/default.xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">
	 
	<ui:define name="content">
		<h:form prependId="false">
			<p:messages id="messages" showDetail="false" autoUpdate="true" closable="true" />
			<p:growl id="glMessages" showDetail="false" autoUpdate="false" closable="true"/>
			  		
			<p:tabView id="tvListBranch" style="height: 400px;"> 
				<p:tab id="tabListBranch" title="#{msg.resolve('tab.branch.list')}">
					<p:spacer width="20" height="15"/>
				
					<h:panelGroup id="pgroupBranchSearch">
						<h:panelGrid columns="5" cellpadding="5" cellspacing="5">
								<h:outputLabel value="#{msg.resolve('label.branch.code')}" for="txtCode"/>
								<p:inputText id="txtCode" value="#{listBranchBean.branchSearch.code}" size="10" maxlength="4"/>
								
								<h:outputLabel value="#{msg.resolve('label.aregional.code')}" for="txtARegionalCode"/>
								<p:inputText id="txtARegionalCode" value="#{listBranchBean.branchSearch.aRegionalCode}" size="10" maxlength="4"/>
								<p:spacer width="20" height="2"/>
 
								<h:outputLabel value="#{msg.resolve('label.regional.registry')}" for="txtRegionalRegistry"/>
								<p:inputText id="txtRegionalRegistry" value="#{listBranchBean.branchSearch.regionalRegister}" size="10"/>
								 
								<h:outputLabel value="#{msg.resolve('label.manager.registry')}" for="txtManagerRegistry"/>
								<p:inputText id="txtManagerRegistry" value="#{listBranchBean.branchSearch.managerRegister}" size="10"/>
								
								<p:commandLink title="#{msg.resolve('label.search')}" actionListener="#{listBranchBean.search}"
									 process="@this, pgroupBranchSearch" update="tvListBranch:dgBranches" ajax="true">
								<h:graphicImage name="busca.png" library="images"/>
							</p:commandLink>
						</h:panelGrid>
					</h:panelGroup>	
					
					<p:spacer width="20" height="20"/>
										
					<p:dataTable id="dgBranches" var="branch" value="#{listBranchBean.branches}"
							emptyMessage="#{msg.resolve('data.table.empty')}"  rows="5" paginator="true" paginatorAlwaysVisible="false"
							paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" 
							paginatorPosition="bottom">
					
						<f:facet name="header">  
				            <h:outputLabel value="#{msg.resolve('data.table.branch.header')}" />
				        </f:facet>  
				        
				        <p:column headerText="#{msg.resolve('label.branch.code')}"  style="width: 85px !important;">  
				            <h:outputText value="#{branch.code}"/>  
				        </p:column> 
				        
				        <p:column headerText="#{msg.resolve('label.branch.name')}">  
				            <h:outputText value="#{branch.name}"/>  
				        </p:column>  
				  
				        <p:column headerText="#{msg.resolve('label.aregional.name')}">  
				            <h:outputText value="#{branch.aRegional.name}" />  
				        </p:column>  
				  
				        <p:column headerText="#{msg.resolve('label.regional.name')}">  
				            <h:outputText value="#{branch.regional.name}" />    
				        </p:column>  
				        
				        <p:column headerText="#{msg.resolve('label.manager.name')}">  
				            <h:outputText value="#{branch.manager.name}" />    
				        </p:column> 
				        <p:column headerText="#{msg.resolve('label.actions')}" style="width: 35px !important;">  
				            <p:commandLink title="#{msg.resolve('label.edit')}" action="/pages/filial/cadastro"
				            		 ajax="false" process="@this" immediate="true" update="messages">
								<h:graphicImage name="pencil.png" library="images"/>
								<f:setPropertyActionListener target="#{branchBean.branch}" value="#{branch}"/>
							</p:commandLink>
				        </p:column>  
					</p:dataTable>
				</p:tab>
			</p:tabView>
		</h:form>	
	</ui:define>
</ui:composition>
